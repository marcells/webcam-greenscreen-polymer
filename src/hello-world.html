<!-- Import Polymer -->
<link rel="import" href="../bower_components/polymer/polymer.html">

<!-- Define your custom element -->
<polymer-element name="hello-world" attributes="width height audio">

    <template>
    	<video id="video" width="{{width}}" height="{{height}}" tabindex=0 autoplay>
            <content></content>
        </video>
    </template>

    <script>
        Polymer('hello-world', {
        	audio: false,
        	width: '640',
            height: '480',
            created: function() {
	            if (!window.URL) {
	                window.URL = window.URL || window.webkitURL || window.msURL || window.oURL;
	            }

	            if (!navigator.getUserMedia) {
	                navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
	            }
	        },

	        ready: function() {
	            var that = this;

	            navigator.getUserMedia({
	                audio: that.audio,
	                video: true
	            },
	            function(stream) {
	                that.$.video.src = window.URL.createObjectURL(stream);
	            },
	            function(err) {
	                throw Error(err);
	            });
	        }
        });
    </script>
</polymer-element>